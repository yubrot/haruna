<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>haruna</title>
<style>
  :root, :root[data-theme="dark"] {
    --bg: #1a1a1a;
    --bg-alt: #242424;
    --fg: #e0e0e0;
    --fg-dim: #888;
    --accent: #2d4a3e;
    --accent-bright: #34d399;
    --border: #3a3a3a;
    --block-border: #555;
    --input-bg: #2a2a2a;
    --btn-bg: #059669;
    --btn-fg: #fff;
    --question-color: #6ee7b7;
    --permission-color: #f87171;
    --header-gradient-start: #1a2f28;
    --header-border: #2a5a4a;
    --windowed-border: #2a5a4a;
    --accent-border: var(--accent);
    --status-connected-bg: #065f46;
    --status-connected-fg: #e0e0e0;
    --status-disconnected-bg: #991b1b;
    --status-disconnected-fg: #e0e0e0;
    --raw-detail-color: #6ee7b7;
    --windowed-bg: radial-gradient(ellipse at 30% 20%, #0f2027 0%, #0a0a0a 60%, #000 100%);
    --windowed-shadow: 0 4px 32px rgba(52, 211, 153, 0.08), 0 0 80px rgba(52, 211, 153, 0.03);
    --palette-0: #000; --palette-1: #a00; --palette-2: #0a0; --palette-3: #a50;
    --palette-4: #00a; --palette-5: #a0a; --palette-6: #0aa; --palette-7: #aaa;
    --palette-8: #555; --palette-9: #f55; --palette-10: #5f5; --palette-11: #ff5;
    --palette-12: #55f; --palette-13: #f5f; --palette-14: #5ff; --palette-15: #fff;
  }
  :root[data-theme="light"] {
    --bg: #fafafa;
    --bg-alt: #f0f0f0;
    --fg: #2a2a2a;
    --fg-dim: #777;
    --accent: #fde8d8;
    --accent-bright: #c2650a;
    --border: #ccc;
    --block-border: #aaa;
    --input-bg: #fff;
    --btn-bg: #d97706;
    --btn-fg: #fff;
    --question-color: #9a5b13;
    --permission-color: #b91c1c;
    --accent-border: #d97706;
    --status-connected-bg: #e8f5e1;
    --status-connected-fg: #2d6a2e;
    --status-disconnected-bg: #fde8e8;
    --status-disconnected-fg: #991b1b;
    --raw-detail-color: #9a5b13;
    --header-gradient-start: #f5ebe0;
    --header-border: #ddd;
    --windowed-border: #ccc;
    --windowed-bg: #e8e8e8;
    --windowed-shadow: 0 4px 24px rgba(0, 0, 0, 0.1), 0 0 60px rgba(0, 0, 0, 0.04);
    --palette-0: #2a2a2a; --palette-1: #c41a00; --palette-2: #007800; --palette-3: #a06600;
    --palette-4: #0037d2; --palette-5: #a500a5; --palette-6: #007878; --palette-7: #767676;
    --palette-8: #555; --palette-9: #e05000; --palette-10: #1a9a1a; --palette-11: #c49000;
    --palette-12: #4070e0; --palette-13: #c050c0; --palette-14: #20a0a0; --palette-15: #333;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    font-family: "UDEV Gothic NFLG", "SF Mono", "Cascadia Code", "Fira Code", Menlo, Consolas, monospace;
    font-size: 14px;
    background: var(--bg);
    color: var(--fg);
    height: 100vh;
  }
  .shell {
    display: flex;
    flex-direction: column;
    height: 100vh;
  }

  /* Header */
  header {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 8px 16px;
    background: linear-gradient(135deg, var(--header-gradient-start) 0%, var(--bg-alt) 100%);
    border-bottom: 1px solid var(--header-border);
    flex-shrink: 0;
  }
  header h1 { font-size: 16px; font-weight: 600; color: var(--accent-bright); }
  .status {
    font-size: 12px;
    padding: 2px 8px;
    border-radius: 4px;
    background: var(--accent);
  }
  .status.connected { background: var(--status-connected-bg); color: var(--status-connected-fg); }
  .status.disconnected { background: var(--status-disconnected-bg); color: var(--status-disconnected-fg); }
  .controls {
    margin-left: auto;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .controls button {
    height: 28px;
    padding: 0 12px;
    border: 1px solid var(--border);
    background: transparent;
    color: var(--fg-dim);
    cursor: pointer;
    font-size: 12px;
    font-family: inherit;
    border-radius: 4px;
  }
  .controls button.active {
    background: var(--accent);
    color: var(--fg);
    border-color: var(--accent-border);
  }
  .icon-btn {
    width: 28px;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 16px;
    line-height: 1;
  }
  .segmented {
    display: flex;
  }
  .segmented button {
    border-radius: 0;
  }
  .segmented button:first-child {
    border-radius: 4px 0 0 4px;
  }
  .segmented button:last-child {
    border-radius: 0 4px 4px 0;
    border-left: none;
  }

  /* Content area */
  .content {
    flex: 1;
    overflow-y: auto;
    padding: 12px 16px;
    overflow-x: hidden;
  }

  /* Interactive mode */
  .message { margin-bottom: 8px; white-space: pre-wrap; word-break: break-word; }
  .message.block {
    border-left: 3px solid var(--block-border);
    padding-left: 8px;
    color: var(--fg-dim);
  }
  .question, .permission {
    margin-bottom: 8px;
    padding: 8px;
    border: 1px solid var(--border);
    border-radius: 4px;
  }
  .question .header { font-weight: bold; margin-bottom: 4px; }
  .question .text { color: var(--question-color); margin-bottom: 6px; }
  .permission .command { color: var(--permission-color); font-weight: bold; margin-bottom: 4px; }
  .permission .desc { margin-bottom: 6px; color: var(--fg-dim); }
  .options { list-style: none; }
  .options li {
    padding: 4px 8px;
    margin: 2px 0;
    cursor: pointer;
    border-radius: 3px;
  }
  .options li:hover { background: var(--accent); }
  .options li.selected { background: var(--accent); font-weight: bold; }
  .options .desc-text { color: var(--fg-dim); font-size: 12px; }
  .indicator {
    padding: 4px 0;
    color: var(--accent-bright);
    font-style: italic;
  }

  /* Raw mode */
  .raw-entry {
    margin-bottom: 2px;
    padding-bottom: 6px;
  }
  .raw-header {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 8px;
    padding: 4px 8px;
    margin: 0 -16px;
    font-size: 11px;
    background: var(--bg-alt);
    border-top: 1px solid var(--border);
  }
  .raw-header .timestamp {
    color: var(--fg-dim);
    margin-right: 4px;
  }
  .raw-tag {
    color: var(--fg-dim);
  }
  .raw-tag + .raw-tag::before {
    content: "Â·";
    margin-right: 8px;
    color: var(--border);
  }
  .raw-cursor-line {
    white-space: pre;
    font-size: 12px;
    color: var(--fg);
    margin-top: 4px;
    margin-bottom: 4px;
    padding: 2px 4px;
    background: var(--bg-alt);
    border-radius: 3px;
    overflow-x: auto;
  }
  .cursor-highlight {
    background: var(--accent-bright);
    color: var(--bg);
  }
  .raw-toggles {
    display: flex;
    gap: 6px;
    margin-bottom: 4px;
  }
  .raw-toggle {
    padding: 2px 8px;
    font-size: 11px;
    font-family: inherit;
    border: 1px solid var(--border);
    background: transparent;
    color: var(--fg-dim);
    cursor: pointer;
    border-radius: 3px;
  }
  .raw-toggle:hover { background: var(--accent); }
  .raw-toggle.accent {
    color: var(--accent-bright);
    border-color: var(--accent-border);
  }
  .raw-toggle.active {
    background: var(--accent);
    color: var(--fg);
    border-color: var(--accent-border);
  }
  .raw-detail {
    white-space: pre-wrap;
    word-break: break-all;
    font-size: 11px;
    color: var(--raw-detail-color);
    margin-bottom: 4px;
    max-height: 300px;
    overflow-y: auto;
    border: 1px solid var(--border);
    padding: 4px;
    border-radius: 3px;
  }

  /* Input area */
  .input-area {
    display: flex;
    gap: 8px;
    padding: 8px 16px;
    background: var(--bg-alt);
    border-top: 1px solid var(--border);
    flex-shrink: 0;
  }
  .input-area textarea {
    flex: 1;
    background: var(--input-bg);
    color: var(--fg);
    border: 1px solid var(--border);
    border-radius: 4px;
    padding: 6px 8px;
    font-family: inherit;
    font-size: 14px;
    resize: none;
    min-height: 36px;
    max-height: 120px;
  }
  .input-area textarea:focus { outline: none; border-color: var(--accent-bright); }
  .input-area button {
    padding: 6px 16px;
    min-height: 36px;
    background: var(--btn-bg);
    color: var(--btn-fg);
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-family: inherit;
    font-size: 14px;
    align-self: flex-end;
  }
  .input-area button:hover { opacity: 0.9; }

  /* Windowed mode */
  .windowed-backdrop {
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--windowed-bg);
  }
  .windowed-backdrop > .shell {
    height: auto;
    background: var(--bg);
    border: 1px solid var(--windowed-border);
    border-radius: 8px;
    overflow: hidden;
    box-shadow: var(--windowed-shadow);
  }
  .windowed-backdrop > .shell > .content {
    overflow-y: auto;
  }
</style>
</head>
<body>
<script type="module" src="./app.tsx"></script>
</body>
</html>
